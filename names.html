<!DOCTYPE HTML>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <title>Hanviken Friidrott - Statistik</title>
  <link rel="icon" href="images/favicon.jpg" type="image/jpg" />
  
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript" src="includes/athletics-stats.js"></script>
  <script type="text/javascript" src="includes/ydn.db-is-core-qry.js"></script>

  <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
  <script type="text/javascript">
  

  // Load the google visualization APIs
  google.charts.load('visualization', '1', { packages : [ 'corechart', 'table' ] });
  google.charts.setOnLoadCallback(initiateData);

  // Initiate variables
  var docs = 'all';
  var docList;
  var data;
  var dataList = [];
  var view;
  var filterList = [];
  var table;
  
  // Callback function for the common Data initiation
  function finished() {
    filterData();
  }
  
  function filterData(){
    view = new google.visualization.DataView(data);
    var name;  
    var filtered_rows = [];
    var current_name = 'start';
    var rows = view.getSortedRows(1);
    for(var i = 0; i < rows.length; i++) {
        var name = view.getValue(rows[i],1);
        if (current_name != name) {
            // First time we see this name.
            filtered_rows.push(rows[i]);
            current_name = name;
        }
    }
    view.setRows(filtered_rows);
    view.setColumns([1,2]);
    table = new google.visualization.Table(document.getElementById('table_div'));
    table.draw(view, {showRowNumber: true, width: '100%', height: '100%'});
  }
  </script>
</head>

<html>
  <body onload="menu('5')">
    <div id="menu"></div>
    <div class="w3-container w3-round-large w3-light-grey w3-margin w3-center">
        <h3 id="page_header">Lista över tävlande</h3>
    </div>
    <div class="w3-container w3-round-large w3-light-grey w3-margin">
        <p></p>
        <div id="table_div" class="w3-center"><p><i class="fa fa-spinner w3-spin" style="font-size:64px"></i></p></div>
        <p></p>
    </div>
  </body>
</html>
